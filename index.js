(()=>{"use strict";const o=window.top.location.hash.slice(1);let t,e;function a(){e&&t&&(e.init(),document.body.classList.add("ready"),o?e.interactionRequired?document.body.classList.add("showPlayButton"):window.startShared():document.body.className="showIntro")}function i(o){shareInput.value=o,shareInput.select()}window.registerOrca=o=>{t=o,a()},window.registerPilot=o=>{e=o,a()},window.startDemo=()=>{window.start("HQ18ZXTt-cBQCWrejZnQEwGEBTTYk0rWANgCEAGWAETAEYAlAFjM+O2gClqi0AFQBuegFEAMjiZc56HlAqSAHKBosAzPJ1dFEAEYA1CuBqaAKuN03M+lNdQBXPGts776lm9BGDwXhRGYBoVCwoKFQAzChjTdwxPdQBZHDBTAHFHeFEAdQBBAAlYhL0YAFU6eBEmNnoAMQ5S0qSQIRQauvrIFx9m0laaACcmuBEVAFZ8idkIUIsVHE1lzSZZ-oRFDR9tLLGAdjq8NMh6NxUWKI2FcE1U9HGJvBmoUXycegN967R9cvi0J16hMfrZ9O0MCIaF0eq5QdwwMMQQ9ahlkaB6Bx5jQcLimDiTvDoPpZHsuKJjngaOsiZsuDUpnhafJWoCcBMMtpmWVOAz6kyIL1uahWagoRMGuAziEwjRqfiCcKIKKOioKPQKDTRPR8NSlUh9YbyEajSqTdczeb+parS1bUqbfawU7uY6XR53bS3Z6eT6ft6-QNA-7gxbQxsA+GblG7TGEpG43TE87kzYE6mYOmM1As9nlXmWQW5LmiyAgA")},window.startShared=()=>{window.start(o)},window.start=a=>{e.start(),document.body.className="started",console.log({hash:o,bin:a,test:/^room=/.test(a)}),/^room=/.test(a)?(t.joinRoom(a.slice(5)),multiplayerButton.classList.add("primary")):a?t.load(a):t.showGuide(),t.start(),orcaFrame.contentWindow.focus()},window.createRoom=async()=>{const o=Math.random().toString(32).slice(2);t.createRoom(o),multiplayerButton.classList.add("primary");const e=()=>i(`${window.origin}/#room=${o}`);multiplayerButton.onclick=e,e()},window.copy=async()=>{const o=shareInput.value;try{await navigator.clipboard.writeText(o)}catch(t){window.open(o)}orcaFrame.contentWindow.focus()},window.share=()=>{const o=t.getCode();i(`${window.origin}/#${o}`)},"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((o=>{console.log("SW registered: ",o)})).catch((o=>{console.log("SW registration failed: ",o)}))}))})();